
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Agenda de Cobertura de Profesoras</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet" />
  <style>
    body { margin:0; font-family:'Inter', sans-serif; background:#cce1d6; color:#444; }
    .sidebar{
      position:fixed; top:0; left:0; width:200px; height:100vh;
      background:#91586d; padding-top:60px; box-shadow:2px 0 5px rgba(0,0,0,.1); z-index:1000;
    }
    .sidebar a{
      display:block; padding:10px 16px; color:#fff; text-decoration:none; font-weight:bold;
      border-bottom:1px solid rgba(255,255,255,.1); font-size:13px;
    }
    .sidebar a:hover{ background:#6d3e4e; }
    .sidebar a.active{ background:#6d3e4e; }
    .header-wrap{
      margin-left:200px;
      display:flex; align-items:center; justify-content:center;
      padding:20px 0; transform:translateX(-10px);
    }
    .header-wrap img{ height:60px; margin-right:16px; }
    .header-title{ margin:0; font-size:28px; color:#91586d; }
    main{ margin-left:200px; padding:20px; }
    #menuToggle{
      display:none; position:fixed; top:10px; left:10px; z-index:1100;
      background:#91586d; color:#fff; border:none; border-radius:6px; padding:8px 12px; font-size:18px; cursor:pointer;
    }
    @media (max-width:768px){
      #menuToggle{ display:block; }
      .sidebar{ display:none; width:100%; height:auto; position:absolute; top:50px; left:0; }
      .sidebar.mostrar{ display:block; }
      .header-wrap{ margin-left:0; transform:none; }
      main{ margin-left:0; }
    }
    .cards-container{ display: flex; gap: 24px; flex-wrap: wrap; }
    .card{
      background:#fff; border-radius:16px; box-shadow:0 2px 8px #0001;
      border:1px solid #eee; padding:24px; flex:1; min-width:340px;
    }
    /* Estilo tipo Excel */
    table {
      width:100%; border-collapse:collapse; font-size:14px;
    }
    th, td {
      padding:8px; text-align:center; border:1px solid #ccc;
    }
    th {
      background:#b48a99; color:#fff; font-weight:bold;
    }
    tbody tr td:first-child {
      font-weight:bold; background:#f9f9f9;
    }
    /* Bordes gruesos entre columnas de d√≠as */
    thead th:not(:first-child),
    tbody td:not(:first-child) {
      border-left:3px solid #91586d;
    }
    .actions .btn { margin-right: 4px; }
    .grid{ display:grid; grid-template-columns: 1fr 1fr; gap:20px; }
    .row2{ display:grid; grid-template-columns:1fr 1fr; gap:10px; }
    @media (max-width:900px){ .grid{ grid-template-columns:1fr; } }
    @media (max-width:560px){ .row2{ grid-template-columns:1fr; } }
    .btn{
      border:none; border-radius:6px; padding:8px 14px; font-size:14px; cursor:pointer; font-weight:600;
      background:#91586d; color:#fff;
    }
    .btn.secondary{ background:#b48a99; }
    .btn.danger{ background:#c0392b; }
    .btn:disabled{ opacity:.6; cursor:not-allowed; }
  </style>
</head>
<body>
  <button id="menuToggle" onclick="toggleMenu()">‚ò∞</button>

  <div class="sidebar">
    <a href="index.html">üìã Alumnas/os</a>
    <a href="pagos.html">üí≥ Pagos</a>
    <a href="gastos.html" class="menu-gastos">üßæ Gastos</a>
    <a href="agenda.html">üìÖ Agenda</a>
    <a href="profesores.html">üë®‚Äçüè´ Profesoras</a>
    <a href="noticias.html">üì∞ Noticias</a>
    <a href="notificaciones.html">üì¢ Notificaciones</a>
    <a href="configuracion.html">‚öôÔ∏è Configuraci√≥n</a>
    <a href="reportes.html" class="menu-reportes">üìà Reportes</a>
    <button onclick="cerrarSesion()" style="width:100%; text-align:left; padding:10px 16px; background-color:transparent; border:none; color:white; font-weight:bold; font-size:13px; cursor:pointer; border-top:1px solid rgba(255,255,255,0.1);">
      üö™ Cerrar sesi√≥n
    </button>
  </div>

  <header class="header-wrap">
    <img src="logo.jpeg" alt="Logo" style="height:48px; margin-right:16px;">
    <h2 class="header-title">Agenda de Cobertura de Profesoras</h2>
  </header>

  <main>
    <!-- Agenda Craig -->
    <section class="card">
      <h3 style="color:#91586d; margin-top:0;">Agenda semanal Craig (Lunes a Viernes, 9-20hs)</h3>
      <table id="agendaCraig">
        <thead>
          <tr>
            <th>Hora</th>
            <th>Lunes</th>
            <th>Martes</th>
            <th>Mi√©rcoles</th>
            <th>Jueves</th>
            <th>Viernes</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </section>

    <!-- Agenda Goyena -->
    <section class="card">
      <h3 style="color:#91586d; margin-top:0;">Agenda semanal Goyena (Lunes a S√°bado, 8-21hs)</h3>
      <table id="agendaGoyena">
        <thead>
          <tr>
            <th>Hora</th>
            <th>Lunes</th>
            <th>Martes</th>
            <th>Mi√©rcoles</th>
            <th>Jueves</th>
            <th>Viernes</th>
            <th>S√°bado</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </section>

    <!-- Formulario -->
    <section class="card">
      <h3 style="color:#91586d; margin-top:0;">Asignaci√≥n de profesores</h3>
      <form id="asignacionForm">
        <div class="grid">
          <div>
            <label for="profesorInput">Profesor</label>
            <input type="text" id="profesorInput" required>
          </div>
          <div>
            <label for="sedeSelect">Sede</label>
            <select id="sedeSelect">
              <option value="Craig">Craig</option>
              <option value="Goyena">Goyena</option>
            </select>
          </div>
        </div>
        <div class="row2">
          <div>
            <label for="diasSelect">D√≠as</label>
            <select id="diasSelect" multiple></select>
          </div>
          <div>
            <label for="horasSelect">Horarios</label>
            <select id="horasSelect" multiple></select>
          </div>
        </div>
        <label for="obsInput">Observaciones</label>
        <input type="text" id="obsInput">
        <div class="actions">
          <button class="btn ok" type="submit">Agregar asignaci√≥n</button>
        </div>
      </form>
      <table id="tablaAsignaciones" style="margin-top:20px;">
        <thead>
          <tr>
            <th>Profesor</th>
            <th>Sede</th>
            <th>D√≠a</th>
            <th>Horario</th>
            <th>Observaciones</th>
            <th>Acciones</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </section>
  </main>

  <script>
    function toggleMenu() {
      document.querySelector('.sidebar').classList.toggle('mostrar');
    }
    function cerrarSesion() {
      alert('Cerrar sesi√≥n');
    }

    const config = {
      Craig: { dias: ["Lunes", "Martes", "Mi√©rcoles", "Jueves", "Viernes"], horaInicio: 9, horaFin: 20 },
      Goyena: { dias: ["Lunes", "Martes", "Mi√©rcoles", "Jueves", "Viernes", "S√°bado"], horaInicio: 8, horaFin: 21 }
    };

    let asignaciones = JSON.parse(localStorage.getItem("asignaciones")) || [];

    function guardarLocal() {
      localStorage.setItem("asignaciones", JSON.stringify(asignaciones));
    }

    function renderAgenda(sede, tableId) {
      const cfg = config[sede];
      const tbody = document.querySelector(`#${tableId} tbody`);
      tbody.innerHTML = "";
      for (let hora = cfg.horaInicio; hora <= cfg.horaFin; hora++) {
        const row = document.createElement("tr");
        const horaStr = hora.toString().padStart(2, "0") + ":00";
        row.innerHTML = `<td>${horaStr}</td>`;
        cfg.dias.forEach(dia => {
          const profesores = asignaciones
            .filter(a => a.sede === sede && a.dias.includes(dia) && a.horas.includes(hora))
            .map(a => a.profesor);
          row.innerHTML += `<td>${profesores.length ? profesores.join(" / ") : ""}</td>`;
        });
        tbody.appendChild(row);
      }
    }

    function renderAsignaciones() {
      const tbody = document.querySelector("#tablaAsignaciones tbody");
      tbody.innerHTML = "";
      asignaciones.forEach((a, idx) => {
        a.dias.forEach(dia => {
          const row = document.createElement("tr");
          row.innerHTML = `
            <td>${a.profesor}</td>
            <td>${a.sede}</td>
            <td>${dia}</td>
            <td>${a.horas.map(h => h.toString().padStart(2, "0") + ":00").join(", ")}</td>
            <td>${a.observaciones || ""}</td>
            <td class="actions">
              <button class="btn secondary" onclick="editarAsignacion(${idx})">Editar</button>
              <button class="btn danger" onclick="eliminarAsignacion(${idx})">Eliminar</button>
            </td>
          `;
          tbody.appendChild(row);
        });
      });
    }

    document.getElementById("asignacionForm").addEventListener("submit", function(e) {
      e.preventDefault();
      const profesor = document.getElementById("profesorInput").value.trim();
      const sede = document.getElementById("sedeSelect").value;
      const dias = Array.from(document.getElementById("diasSelect").selectedOptions).map(opt => opt.value);
      const horas = Array.from(document.getElementById("horasSelect").selectedOptions).map(opt => parseInt(opt.value));
      const obs = document.getElementById("obsInput").value.trim();

      if (!profesor || !dias.length || !horas.length) {
        alert("Completa todos los campos obligatorios.");
        return;
      }

      asignaciones.push({ profesor, sede, dias, horas, observaciones: obs });
      guardarLocal();
      this.reset();
      actualizarTodo();
    });

    window.editarAsignacion = function(idx) {
      const a = asignaciones[idx];
      document.getElementById("profesorInput").value = a.profesor;
      document.getElementById("sedeSelect").value = a.sede;

      const diasSelect = document.getElementById("diasSelect");
      Array.from(diasSelect.options).forEach(opt => {
        opt.selected = a.dias.includes(opt.value);
      });

      const horasSelect = document.getElementById("horasSelect");
      Array.from(horasSelect.options).forEach(opt => {
        opt.selected = a.horas.includes(parseInt(opt.value));
      });

      document.getElementById("obsInput").value = a.observaciones || "";
      asignaciones.splice(idx, 1);
      guardarLocal();
      actualizarTodo();
    };

    window.eliminarAsignacion = function(idx) {
      if (confirm("¬øEliminar esta asignaci√≥n?")) {
        asignaciones.splice(idx, 1);
        guardarLocal();
        actualizarTodo();
      }
    };

    function actualizarTodo() {
      renderAgenda("Craig", "agendaCraig");
      renderAgenda("Goyena", "agendaGoyena");
      renderAsignaciones();
    }

    document.getElementById("sedeSelect").addEventListener("change", function() {
      const sede = this.value;

      const diasSelect = document.getElementById("diasSelect");
      diasSelect.innerHTML = "";
      config[sede].dias.forEach(dia => {
        const opt = document.createElement("option");
        opt.value = dia;
        opt.text = dia;
        diasSelect.appendChild(opt);
      });

      const horasSelect = document.getElementById("horasSelect");
      horasSelect.innerHTML = "";
      for (let h = config[sede].horaInicio; h <= config[sede].horaFin; h++) {
        const opt = document.createElement("option");
        opt.value = h;
        opt.text = h.toString().padStart(2, "0") + ":00";
        horasSelect.appendChild(opt);
      }
    });

    function init() {
      document.getElementById("sedeSelect").value = "Craig";
      document.getElementById("sedeSelect").dispatchEvent(new Event("change"));
      actualizarTodo();
    }

    window.onload = init;
  </script>
</body>
</html>
