
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Agenda de Cobertura de Profesoras</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet" />
  <style>
    body { margin:0; font-family:'Inter', sans-serif; background:#f4f6f8; color:#444; }
    .sidebar{
      position:fixed; top:0; left:0; width:200px; height:100vh;
      background:#91586d; padding-top:60px; box-shadow:2px 0 5px rgba(0,0,0,.1); z-index:1000;
    }
    .sidebar a{
      display:block; padding:10px 16px; color:#fff; text-decoration:none; font-weight:bold;
      border-bottom:1px solid rgba(255,255,255,.1); font-size:13px;
    }
    .sidebar a:hover{ background:#6d3e4e; }
    .sidebar a.active{ background:#6d3e4e; }
    .header-wrap{
      margin-left:200px; display:flex; align-items:center; justify-content:center;
      padding:20px 0; background:#fff; box-shadow:0 2px 4px rgba(0,0,0,.1);
    }
    .header-title{ margin:0; font-size:28px; color:#91586d; }
    main{ margin-left:200px; padding:20px; }
    .card{
      background:#fff; border-radius:12px; box-shadow:0 2px 8px rgba(0,0,0,.08);
      padding:24px; margin-bottom:20px;
    }
    /* Estilo tipo Excel */
    table {
      width:100%; border-collapse:collapse; font-size:14px; margin-top:10px;
    }
    th, td {
      padding:8px; text-align:center; border:1px solid #ccc;
    }
    th {
      background:#b48a99; color:#fff; font-weight:bold;
    }
    tbody tr td:first-child {
      font-weight:bold; background:#f9f9f9;
    }
    thead th:not(:first-child),
    tbody td:not(:first-child) {
      border-left:3px solid #91586d;
    }
    .grid{ display:grid; grid-template-columns:1fr 1fr; gap:20px; }
    .row2{ display:grid; grid-template-columns:1fr 1fr; gap:10px; margin-top:10px; }
    .btn{
      border:none; border-radius:6px; padding:8px 14px; font-size:14px; cursor:pointer; font-weight:600;
      background:#91586d; color:#fff; margin-top:10px;
    }
    .btn:hover{ background:#6d3e4e; }
    .toggle-btn{
      background:#b48a99; color:#fff; border:none; padding:6px 12px; border-radius:6px; cursor:pointer; margin-bottom:8px;
    }
    .toggle-btn:hover{ background:#91586d; }
    .hidden{ display:none; }
    select{
      width:100%; padding:6px; border-radius:6px; border:1px solid #ccc; box-shadow:0 2px 4px rgba(0,0,0,0.1);
    }
  </style>
</head>
<body>
  <!-- Men√∫ lateral -->
  <div class="sidebar">
    <a href="index.html">üìã Alumnas/os</a>
    <a href="pagos.html">üí≥ Pagos</a>
    <a href="gastos.html">üßæ Gastos</a>
    <a href="agenda.html">üìÖ Agenda</a>
    <a href="profesores.html" class="active">üë®‚Äçüè´ Profesoras</a>
    <a href="noticias.html">üì∞ Noticias</a>
    <a href="notificaciones.html">üì¢ Notificaciones</a>
    <a href="configuracion.html">‚öôÔ∏è Configuraci√≥n</a>
    <a href="reportes.html">üìà Reportes</a>
    <button onclick="alert('Cerrar sesi√≥n')" style="width:100%; text-align:left; padding:10px 16px; background-color:transparent; border:none; color:white; font-weight:bold; font-size:13px; cursor:pointer; border-top:1px solid rgba(255,255,255,0.1);">
      üö™ Cerrar sesi√≥n
    </button>
  </div>

  <!-- Encabezado -->
  <header class="header-wrap">
    <h2 class="header-title">Agenda de Cobertura de Profesoras</h2>
  </header>

  <main>
    <!-- Agenda Craig Reformer -->
    <section class="card">
      <h3 style="color:#91586d;">Agenda Craig Reformer (Lunes a Viernes, 9-20hs)</h3>
      <table id="agendaCraigReformer">
        <thead>
          <tr>
            <th>Hora</th>
            <th>Lunes</th>
            <th>Martes</th>
            <th>Mi√©rcoles</th>
            <th>Jueves</th>
            <th>Viernes</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </section>

    <!-- Agenda Craig Circuito -->
    <section class="card">
      <h3 style="color:#91586d;">Agenda Craig Circuito (Lunes a Viernes, 9-20hs)</h3>
      <table id="agendaCraigCircuito">
        <thead>
          <tr>
            <th>Hora</th>
            <th>Lunes</th>
            <th>Martes</th>
            <th>Mi√©rcoles</th>
            <th>Jueves</th>
            <th>Viernes</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </section>

    <!-- Agenda Goyena -->
    <section class="card">
      <h3 style="color:#91586d;">Agenda Goyena (Lunes a S√°bado, 8-21hs)</h3>
      <table id="agendaGoyena">
        <thead>
          <tr>
            <th>Hora</th>
            <th>Lunes</th>
            <th>Martes</th>
            <th>Mi√©rcoles</th>
            <th>Jueves</th>
            <th>Viernes</th>
            <th>S√°bado</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </section>

    <!-- Formulario -->
    <section class="card">
      <h3 style="color:#91586d;">Asignaci√≥n de profesores</h3>
      <form id="asignacionForm">
        <div class="grid">
          <div>
            <label for="profesorInput">Profesor</label>
            <input type="text" id="profesorInput" required>
          </div>
          <div>
            <label for="sedeSelect">Sede</label>
            <select id="sedeSelect">
              <option value="CraigReformer">Craig Reformer</option>
              <option value="CraigCircuito">Craig Circuito</option>
              <option value="Goyena">Goyena</option>
            </select>
          </div>
        </div>
        <div class="row2">
          <div>
            <label>D√≠as</label>
            <button type="button" class="toggle-btn" onclick="toggleSelect('diasSelect')">Seleccionar d√≠as</button>
            <select id="diasSelect" multiple class="hidden"></select>
          </div>
          <div>
            <label>Horarios</label>
            <button type="button" class="toggle-btn" onclick="toggleSelect('horasSelect')">Seleccionar horarios</button>
            <select id="horasSelect" multiple class="hidden"></select>
          </div>
        </div>
        <label for="obsInput">Observaciones</label>
        <input type="text" id="obsInput">
        <div class="actions">
          <button class="btn" type="submit">Agregar asignaci√≥n</button>
        </div>
      </form>
      <table id="tablaAsignaciones" style="margin-top:20px;">
        <thead>
          <tr>
            <th>Profesor</th>
            <th>Sede</th>
            <th>D√≠a</th>
            <th>Horario</th>
            <th>Observaciones</th>
            <th>Acciones</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </section>
  </main>

  <script>
    const config = {
      CraigReformer: { dias: ["Lunes", "Martes", "Mi√©rcoles", "Jueves", "Viernes"], horaInicio: 9, horaFin: 20 },
      CraigCircuito: { dias: ["Lunes", "Martes", "Mi√©rcoles", "Jueves", "Viernes"], horaInicio: 9, horaFin: 20 },
      Goyena: { dias: ["Lunes", "Martes", "Mi√©rcoles", "Jueves", "Viernes", "S√°bado"], horaInicio: 8, horaFin: 21 }
    };

    let asignaciones = JSON.parse(localStorage.getItem("asignaciones")) || [];

    function guardarLocal() {
      localStorage.setItem("asignaciones", JSON.stringify(asignaciones));
    }

    function toggleSelect(id) {
      document.getElementById(id).classList.toggle('hidden');
    }

    function renderAgenda(sede, tableId) {
      const cfg = config[sede];
      const tbody = document.querySelector(`#${tableId} tbody`);
      tbody.innerHTML = "";
      for (let hora = cfg.horaInicio; hora <= cfg.horaFin; hora++) {
        const row = document.createElement("tr");
        const horaStr = hora.toString().padStart(2, "0") + ":00";
        row.innerHTML = `<td>${horaStr}</td>`;
        cfg.dias.forEach(dia => {
          const profesores = asignaciones
            .filter(a => a.sede === sede && a.dias.includes(dia) && a.horas.includes(hora))
            .map(a => a.profesor);
          row.innerHTML += `<td>${profesores.length ? profesores.join(" / ") : ""}</td>`;
        });
        tbody.appendChild(row);
      }
    }

    function renderAsignaciones() {
      const tbody = document.querySelector("#tablaAsignaciones tbody");
      tbody.innerHTML = "";
      asignaciones.forEach((a, idx) => {
        a.dias.forEach(dia => {
          const row = document.createElement("tr");
          row.innerHTML = `
            <td>${a.profesor}</td>
            <td>${a.sede}</td>
            <td>${dia}</td>
            <td>${a.horas.map(h => h.toString().padStart(2, "0") + ":00").join(", ")}</td>
            <td>${a.observaciones || ""}</td>
            <td>
              <button class="btn secondary" onclick="editarAsignacion(${idx})">Editar</button>
              <button class="btn danger" onclick="eliminarAsignacion(${idx})">Eliminar</button>
            </td>
          `;
          tbody.appendChild(row);
        });
      });
    }

    document.getElementById("asignacionForm").addEventListener("submit", function(e) {
      e.preventDefault();
      const profesor = document.getElementById("profesorInput").value.trim();
      const sede = document.getElementById("sedeSelect").value;
      const dias = Array.from(document.getElementById("diasSelect").selectedOptions).map(opt => opt.value);
      const horas = Array.from(document.getElementById("horasSelect").selectedOptions).map(opt => parseInt(opt.value));
      const obs = document.getElementById("obsInput").value.trim();

      if (!profesor || !dias.length || !horas.length) {
        alert("Completa todos los campos obligatorios.");
        return;
      }

      asignaciones.push({ profesor, sede, dias, horas, observaciones: obs });
      guardarLocal();
      this.reset();
      actualizarTodo();
    });

    window.editarAsignacion = function(idx) {
      const a = asignaciones[idx];
      document.getElementById("profesorInput").value = a.profesor;
      document.getElementById("sedeSelect").value = a.sede;

      const diasSelect = document.getElementById("diasSelect");
      Array.from(diasSelect.options).forEach(opt => {
        opt.selected = a.dias.includes(opt.value);
      });

      const horasSelect = document.getElementById("horasSelect");
      Array.from(horasSelect.options).forEach(opt => {
        opt.selected = a.horas.includes(parseInt(opt.value));
      });

      document.getElementById("obsInput").value = a.observaciones || "";
      asignaciones.splice(idx, 1);
      guardarLocal();
      actualizarTodo();
    };

    window.eliminarAsignacion = function(idx) {
      if (confirm("¬øEliminar esta asignaci√≥n?")) {
        asignaciones.splice(idx, 1);
        guardarLocal();
        actualizarTodo();
      }
    };

    function actualizarTodo() {
      renderAgenda("CraigReformer", "agendaCraigReformer");
      renderAgenda("CraigCircuito", "agendaCraigCircuito");
      renderAgenda("Goyena", "agendaGoyena");
      renderAsignaciones();
    }

    document.getElementById("sedeSelect").addEventListener("change", function() {
      const sede = this.value;

      const diasSelect = document.getElementById("diasSelect");
      diasSelect.innerHTML = "";
      config[sede].dias.forEach(dia => {
        const opt = document.createElement("option");
        opt.value = dia;
        opt.text = dia;
        diasSelect.appendChild(opt);
      });

      const horasSelect = document.getElementById("horasSelect");
      horasSelect.innerHTML = "";
      for (let h = config[sede].horaInicio; h <= config[sede].horaFin; h++) {
        const opt = document.createElement("option");
        opt.value = h;
        opt.text = h.toString().padStart(2, "0") + ":00";
        horasSelect.appendChild(opt);
      }
    });

    function init() {
      document.getElementById("sedeSelect").value = "CraigReformer";
      document.getElementById("sedeSelect").dispatchEvent(new Event("change"));
      actualizarTodo();
    }

    window.onload = init;
